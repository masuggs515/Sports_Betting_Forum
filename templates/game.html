{% extends 'base.html' %}
{% block title %} {{game.team_one}} vs. {{game.team_two}} {% endblock %}

{% block content %}
<h2 class="mt-2 text-center text-white">{{game.team_one}} vs. {{game.team_two}}</h2>
<div class="container my-5">
    <div class="container d-flex">
        <div class="container row d-flex text-center justify-content-center">
            <div class="col-6 bg-info p-1">Teams</div>
            <div class="col-3 bg-success p-1">Spread</div>
            <div class="col-6 bg-success p-3">{{game.team_one}}</div>
            <div class="col-3 bg-info p-3">{{game.team_one_odds}}</div>
            <div class="col-6 bg-info p-3">{{game.team_two}}</div>
            <div class="col-3 bg-success p-3">{{game.team_two_odds}}</div>
        </div>
    </div>

</div>

<section>
    <div class="container">
        <div class="row">
            <div class="text-white col-sm-5 col-md-6 col-12 pb-4">
                <h1>Comments</h1>
                {% if comments %}
                {% for comment in comments %}
                <div class="bg-dark border border-1 border-white rounded-3 mt-4 px-3 pt-2 text-justify float-left">
                    <img src={{comment.user.image_url}} alt="" class="rounded-circle" width="35" height="35">
                    <h4 class="d-inline mx-2">{{comment.user.username}}</h4>
                    <span class="float-end"><small>{{comment.timestamp.strftime("%d %B %Y %I:%M %p")}}</small></span>
                    {% if comment.user.id == g.user.id %}
                    <form id="delete-comment" action="/comment/{{comment.id}}/delete" method="POST" class="float-end">
                        <button type="submit" id="delete-comment"
                            class="btn btn-sm btn-outline-light me-2">Delete comment <i
                                class="fa fa-trash"></i></button>
                    </form>
                    {% endif %}
                    <br>
                    <p class="mx-4 mt-2">{{comment.text}}</p>
                </div>
                {% endfor %}
                {% else %}
                <div class="container">
                    <h4 class="mt-3 text-center text-white">No comments yet, Get the conversation started!</h4>
                </div>
                {% endif %}
            </div>
            <div class="col-lg-4 col-md-5 col-sm-4 offset-md-1 offset-sm-1 col-12 mt-4">
                <form id="comment-form" method="POST">
                    <div class="form-group">
                        <h4 class="text-white">Leave a comment</h4>
                        {{ form.hidden_tag() }}

                        {% for field in form if field.widget.input_type != 'hidden' %}
                        {% for error in field.errors %}
                        <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                        {{ field( id="{{field.label.text}}", cols="30", rows="5", class="my-2 form-control bg-dark
                        text-white") }}
                        {% endfor %}

                        <div class="form-group"> <button type="submit" id="post" class="btn btn-dark">Post
                                Comment</button> </div>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}